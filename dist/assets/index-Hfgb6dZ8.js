(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const u=document.querySelector("canvas"),c=u.getContext("2d"),p=20,y=10,A=20,x=document.querySelector("span");let h=0;u.height=p*A;u.width=p*y;c.scale(p,p);function P(e,t){return Array(e).fill().map(()=>Array(t).fill(0))}const l=P(A,y),w=[[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[0,1],[0,1],[1,1]],[[1,0],[1,0],[1,1]],[[1],[1],[1],[1]]],o={position:{x:6,y:0},shape:[[1,1],[1,1]]};let m=0,g=0;function v(e=0){const t=e-g;g=e,m+=t,m>1e3&&(o.position.y++,f(o.shape)&&(o.position.y--,O(),L()),m=0),R(),window.requestAnimationFrame(v)}function R(){c.fillStyle="#000",c.fillRect(0,0,u.width,u.height),l.forEach((e,t)=>{e.forEach((n,s)=>{n===1&&(c.fillStyle="yellow",c.fillRect(s,t,1,1))})}),o.shape.forEach((e,t)=>{e.forEach((n,s)=>{n===1&&(c.fillStyle="red",c.fillRect(s+o.position.x,t+o.position.y,1,1))})})}function S(e){const t=e.length,n=e[0].length,s=Array(n).fill().map(()=>Array(t).fill(0));for(let r=0;r<t;r++){const a=t-1-r;for(let d=0;d<n;d++)s[d][a]=e[r][d]}const i=e;return f(s)?i:s}document.addEventListener("keydown",e=>{e.key==="ArrowLeft"&&(o.position.x--,f(o.shape)&&o.position.x++),e.key==="ArrowRight"&&(o.position.x++,f(o.shape)&&o.position.x--),e.key==="ArrowDown"&&(o.position.y++,f(o.shape)&&(o.position.y--,O(),L())),e.key==="ArrowUp"&&(o.shape=S(o.shape))});function f(e){return e.find((t,n)=>t.find((s,i)=>{var r;return s!==0&&((r=l[n+o.position.y])==null?void 0:r[i+o.position.x])!==0}))}function O(){o.shape.forEach((e,t)=>{e.forEach((n,s)=>{n===1&&(l[t+o.position.y][s+o.position.x]=1)})}),o.shape=w[Math.floor(Math.random()*w.length)],o.position.x=Math.floor(Math.random()*(y-(o.shape[0].length-1))),o.position.y=0,f(o.shape)&&(window.alert("Game Over, Sorry!!"),l.forEach(e=>e.fill(0)),h=0,x.innerText=h)}function L(){const e=[];l.forEach((t,n)=>{t.every(s=>s===1)&&(e.push(n),h+=10,x.innerText=h)}),e.forEach(t=>{l.splice(t,1);const n=Array(y).fill(0);l.unshift(n)})}const E=document.querySelector("section");E.addEventListener("click",()=>{E.remove(),v();const e=new window.Audio("./media/tetris.mp3");e.volume=.5,e.loop=!0,e.play()});
